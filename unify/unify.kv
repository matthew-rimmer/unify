#:kivy 1.8

#:import utils kivy.utils
#:include data/setup/initial.kv
#:include data/setup/login.kv
#:include data/setup/register.kv
#:include data/setup/profile_creation.kv
#:include data/setup/account_verification.kv

# Screen manager for the initial screens of the app (registration, verification, profile creation and login)
ScreenManager:
	Initial:
		name: "initial_screen"
		id: initial_screen

	Login:
		name: "login_screen"
		id: login_screen

	Register:
		name: "register"
		id: register

	ProfileCreation:
		name: "profile_creation"
		id: profile_creation

	AccountVerification:
		name: "account_verification"
		id: account_verification

	MainSections:
		name: "main"
		id: main


# Contains the second screen manager for the rest of the screens
# The title at the top of each screen and the navigation icons at the bottom of each screen remain fixed
<MainSections>
	BoxLayout:
		orientation: 'vertical'

		# Main background colour
		canvas:
			Color:
				rgb: utils.get_color_from_hex("#9999ff")
			Rectangle:
				size: self.size
				pos: self.pos

		# Title for the screens
		Label:
			id: title
			text: ''
			size_hint_y: None
			height: dp(70)
			font_size: dp(17)
			color: 95,158,160,1

		# Screen manager which handles the transitions between the screens
		ScreenManager:
			id: sm
			size_hint: 1, .6
			on_current_screen:
				idx = app.screen_names.index('match')

		# The three main navigation icons for the app (for the user profile, find friends and find events screens)
		GridLayout:
			cols: 3
			size_hint: 1, .04
			ImageButton:
				# icon made by Smashicons from www.flaticon.com
				source: "data/icons/profile_icon.png"
				on_release: app.go_screen(7)
			ImageButton:
				# icon made by Freepik from www.flaticon.com
				source: "data/icons/find_icon.png"
				on_release: app.go_screen(5)
			ImageButton:
				# icon made by iconixar from www.flaticon.com
				source: "data/icons/events_icon.png"
				on_release: app.go_screen(3)


# Code for RoundedButton & OutlinedButton adapted from Youtuber 'Samuel Courses'
# Available at https://www.youtube.com/watch?v=Xv57jB_Xvqo

<RoundedButton>
	background_color: (0,0,0,0)
	background_normal: ''
	back_color: (192, 192, 192, 0.3)
	border_radius: [11]
	color: (0,0,0,1)

	canvas.before:
		Color:
			rgba: self.back_color
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: self.border_radius

<OutlinedButton>
	font_size: dp(13)
	text_size: self.width, None
	halign: 'center'
	background_color: (0,0,0,0)
	background_normal: ''
	back_color: (255, 255, 255, 0.3)
	border_radius: 5
	color: (0,0,0,1)
	size_hint_y: None
	height: dp(30)

	canvas.before:
		Color:
			rgba: self.back_color
		Line:                                # pos x, pos y, width, height, radius
			rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], self.border_radius)
			width: 0.9
